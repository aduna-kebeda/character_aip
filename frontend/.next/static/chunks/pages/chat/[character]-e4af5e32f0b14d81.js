(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{7956:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[character]",function(){return s(6254)}])},6254:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(4848),l=s(6715),n=s(6540),r=s(7027),A=s(8144),i=s(9965),d=s.n(i);let c={src:"/_next/static/media/gemini_icon.af9cda70.png",height:80,width:80,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAJ1BMVEVMaXFnmtCMjMpqjMxamNh4gNNtgs1miNJSneOOeb1inNd5fcdbkuG/H1eZAAAADHRSTlMAOg2AbO+F4uJWJ0UADi7UAAAACXBIWXMAABJ0AAASdAHeZh94AAAAKUlEQVR4nGNgQAAmRiiDm50LTHOy8nCAxZjYeFigalgYmCHKmGAMMAAAEEwAa2lOZKkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},o={src:"/_next/static/media/user_icon.9509ce1e.png",height:100,width:100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAdVBMVEWFm5e8qZR+lpaJoplTPj+lppLOr5Fmn58xJiozPUHVp4yzqZKbaFOfloW4wKfYn4QsEhOqa1dVkZp7ZFcpGBkyTVicjXyepZ9zenlAgpFtS0bivJ11cGmTh3ZUmpzFgmeOiX9RLyx/QDNyNzGXOStfdXNYIiQ5MK5hAAAACXBIWXMAAAsQAAALEAGtI711AAAARUlEQVR4nAXBhQGAMAADsM7dcHf4/0QS0H4w7VgBJOgmGwCyq63XDCDOpjJRBSHmVBalIF3YL7MpxFX7M78M8eD8/h7+A3JSA6ILaUMLAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},u=()=>{let{character:e,message:t}=(0,l.useRouter)().query,[s,i]=(0,n.useState)(""),[u,m]=(0,n.useState)([]),x=(0,n.useContext)(r.o),h=null==x?void 0:x.setContextLoading;null==x||x.contextLoading;let[g,f]=(0,n.useState)(""),[p,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{"default"===e&&t?(m([{sender:"User",text:t}]),y(t,!1)):"default"===e&&m([{sender:"AI",text:"Welcome! How can I assist you today?"}])},[e,t]);let N=e=>{let t=e.split("**"),s="";for(let e=0;e<t.length;e++)0===e||e%2==0?s+="<span>".concat(t[e],"</span>"):s+="<b>".concat(t[e],"</b>");return s.replace(/\*/g,"<br>")},w=(e,t)=>{setTimeout(()=>{f(e=>e+t)},75*e)},y=async function(t){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t.trim()){if(s){let e={sender:"User",text:t};m(t=>[...t,e])}i(""),h&&h(!0),b(!0);try{let s=await (0,A._z)(t,e),a=N(s),l=a.split(" ");f("");for(let e=0;e<l.length;e++){let t=l[e];w(e,t+" ")}setTimeout(()=>{m(e=>[...e,{sender:"AI",text:a}]),f(""),b(!1)},75*l.length)}catch(e){console.error("Error sending message:",e)}finally{h&&h(!1)}}};return(0,a.jsxs)("div",{className:"flex flex-col w-[100%] items-center justify-center flex-1 min-h-screen ",children:[(0,a.jsxs)("div",{className:"fixed top-0 ml-16 w-[80%] flex justify-between items-center p-4   z-10",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:e}),(0,a.jsx)(d(),{src:o,alt:"User Avatar",className:"w-10 h-10 rounded-full"})]}),(0,a.jsx)("div",{className:"flex-1 w-[60%] mt-16  rounded-b-md overflow-y-auto",style:{paddingBottom:"80px"},children:(0,a.jsxs)("div",{className:"space-y-4",children:[u.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-4 ".concat("User"===e.sender?"flex-row-reverse space-x-reverse":""),children:[(0,a.jsx)(d(),{src:"User"===e.sender?o:c,alt:"".concat(e.sender," avatar"),className:"w-10 h-10 rounded-full"}),(0,a.jsx)("div",{className:"p-3 rounded-md ".concat("User"===e.sender?"bg-blue-100 text-right":"bg-gray-100 text-left"),children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text}})})]},t)),p&&(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)(d(),{src:c,alt:"AI avatar",className:"w-10 h-10 rounded-full"}),(0,a.jsx)("div",{className:"p-3 bg-gray-100 rounded-md text-left",children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:g}})})]})]})}),(0,a.jsx)("div",{className:"w-full fixed bottom-0 max-w-4xl p-4 bg-white shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"Type your message...",className:"flex-1 p-4 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:()=>y(s),className:"p-4 bg-blue-500 text-white rounded-r-md hover:bg-blue-600 transition duration-300",children:"Send"})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7956)),_N_E=e.O()}]);